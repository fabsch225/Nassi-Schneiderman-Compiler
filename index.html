<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nassi-Shneiderman Diagram Sequence</title>
<script src="src/nassi_svg_api.js"></script>
<script src="src/compiler.js"></script>
<script src="src/converter.js"></script>
<style>
    svg {
        border: 1px solid black;
        margin: 20px auto;
        width: 100%;
        height: 600px;
    }
    #code-block {
        width: 400px;
        height: 450px;
        border: 1px solid #ccc;
        margin-bottom: 10px;
    }

    #code-button {
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        cursor: pointer;
    }
    #container {
        display: flex;
        flex-direction: row;
    }
</style>
</head>
<body>
<h1>Nassi-Shneiderman Diagram Reverse Engineering Compiler</h1>
<div id="container">
<div>
<textarea id="code-block" placeholder="Write your Javascript..." >
    print(x);
    while(x < 1) {
      x += 1;
      if (x == 0) {
        print(0)
      }
      else {
        if (x == 5) {
          print(ist 5)
        }
        else {
          print(nicht 5)
        }
      }
    }
    do {
      print(nix)
    } while (xxx)
    print(done)
</textarea><br>

</div>
<button id="code-button" onclick="draw()">Draw Diagram</button>
<svg id="canvas" ></svg>
</div>
<script>
    var svgContainer = document.getElementById('canvas');
    
    //Manual creation of a Nassi-Shneiderman diagram
    /*svgContainer.innerHTML += createSequenceBlock(10, 10, 300, 50, "Start").svgAppendix;
    var block = createDecisionBlock(10, 60, 300, 100, "Was ist Schwerer", "1 Kg Federn", "1 Kg Gold");
    svgContainer.innerHTML += block.svgAppendix;
    var bounds1 = block.children[0];
    var bounds2 = block.children[1];
    var option1 = createSequenceBlock(bounds1.start_x, bounds1.start_y, bounds1.width, bounds1.height, "Das ist richtig");
    var option2 = createSequenceBlock(bounds2.start_x, bounds2.start_y, bounds2.width, bounds2.height, "Das ist richtig");
    svgContainer.innerHTML += option1.svgAppendix;
    svgContainer.innerHTML += option2.svgAppendix;*/

    // Example usage:
    const code = `
        if (1 < 2) {
            print(1)
        } 
        print(23)
    `;
    var svg = convert(10, 10, 300, 50, lex_front(code));
    svgContainer.innerHTML += svg;

    function draw() {
        var code = document.getElementById('code-block').value;
        var svgContainer = document.getElementById('canvas');

        var svg = convert(10, 10, 800, 50, lex_front(code), "My First Diagram");
        svgContainer.innerHTML = "";
        svgContainer.innerHTML += svg;
    }
</script>
</body>
</html>
